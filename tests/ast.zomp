

(func void quoteTest () (
  (printlnString "Printing quoted ast:")
  (var (ptr ast) tree `(theid arg0 arg1 (arg2 arg2a arg2b)))
  (printAst tree 0)

  (printlnString "Printing handcrafted ast:")
  (var (ptr ast) tst (seq
    (var (ptr ast) t (simpleAst "foo"))
    (addChild t (simpleAst "a"))
    (addChild t (simpleAst "b"))
    t ))
  (printAst tst 0)
  ))

(func void printBuilder ((cstring name)) (
  (var (ptr ast) tree `(print #(simpleAst name)))
  (printString "Printing ast for ") (printString name) (println)
  (printAst tree 1)
  ))

(macro compileMessage (
  (printlnString "hello, compiler")
  (ret `(seq))
  ))

(func int main () (
  (printlnString "hello, ast")

  (var (ptr ast) tree (simpleAst "simple"))
  (template extraChild name (
    (addChild tree (simpleAst #name))
    ))
  (extraChild "child")
  (extraChild "child2")
  (extraChild "child3")
  (extraChild "child4")
  (printAst tree 0)

  (quoteTest)

  (printBuilder "foo")
  (printBuilder "bar")
  (printBuilder "baz")
  
  100
  ))

  