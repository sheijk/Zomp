
(type iptr (ptr int))
(type iptr2 (ptr (ptr int)))
(type itpr2 (ptr iptr2))

(func int twice (std:seq (int v)) (std:seq
  (int.add v v)
  ))

  
(func (ptr int) int.new (std:seq (int v)) (std:seq
  (var (ptr int) pointer (int.malloc 1))
  (int.store v pointer)
  pointer
  ))

(func (ptr float) float.new (std:seq (float v)) (std:seq
  (var (ptr float) pointer (float.malloc 1))
  (float.store v pointer)
  pointer
  ))

(func (ptr bool) bool.new (std:seq (bool v)) (std:seq
  (var (ptr bool) pointer (bool.malloc 1))
  (bool.store v pointer)
  pointer
  ))

(func (ptr void) test () (std:seq
  (var (ptr void) null (nullptr void))
  null
  ))

// (type iptr2 (ptr (ptr int)))
// (func (ptr (ptr int)) newPtrTo (std:seq (int v)) (std:seq
//   (var (ptr int) ptr2int (int.malloc 1))
//   (int.store v ptr2int)
//   (var (ptr (ptr int)) ptr2ptr2int (malloc 1 iptr))
//   (store ptr2int ptr2ptr2int)
//   ptr2ptr2int
//   ))

(func int main () (std:seq
  (int.deref (int.new (twice 10)))
  ))
  

